# Enable Navigation Icons - Development Guide

## Project Overview
WordPress plugin that adds icon support to Navigation Block items (navigation-link, navigation-submenu, ollie/mega-menu). Uses `@wordpress/scripts` for build tooling.

## Repository Structure
```
├── enable-navigation-icons.php   # Main plugin file (PHP server-side logic)
├── readme.txt                    # WordPress.org plugin readme
├── src/                          # JavaScript/SCSS source
│   ├── index.js                  # Editor entry point
│   ├── index.scss                # Frontend styles
│   ├── editor.scss               # Editor-only styles
│   ├── components/               # React components (inserter, controls)
│   ├── icons/                    # Icon definitions (WordPress, social)
│   └── utils/                    # Utility functions
├── build/                        # Compiled output (.gitignored, generated by wp-scripts)
├── languages/                    # Translation files
├── .wordpress-org/               # WP.org assets (banners, icons, screenshots)
├── .github/workflows/            # CI and deployment automation
└── webpack.config.js             # Custom webpack config
```

## Commands
- `npm run build` — Build for production
- `npm run start` — Watch mode for development
- `npm run lint:js` — Lint JavaScript
- `npm run lint:css` — Lint CSS/SCSS
- `npm run lint:js:src:fix` — Auto-fix JS lint issues
- `npm run plugin-zip` — Create distribution zip
- `npm run update-pot` — Generate translation POT file

## Development Standards
- Follow WordPress Coding Standards (WPCS) for PHP, JS, and CSS
- PHP 7.4+ minimum, WordPress 6.3+ minimum
- All user-facing strings must use `__()` / `_e()` with text domain `enable-navigation-icons`
- Sanitize all input (`sanitize_*`), escape all output (`esc_*`)
- SVG content must be sanitized with `wp_kses()` using the allowed tags list

## Deployment
- **Git** is for development; **SVN** is for WordPress.org distribution
- GitHub releases trigger the deploy workflow (`.github/workflows/deploy.yml`)
- The `.distignore` file controls what's excluded from the distribution
- Version must be synced in: `package.json`, `enable-navigation-icons.php`, and `readme.txt`

## Key Architecture
- Icons are rendered server-side via `render_block` filters (not saved in block markup)
- Parent Navigation block stores default icon settings; child items inherit or override
- Navigation block defaults use a global stack (`$enable_navigation_icons_nav_stack`) to handle nested navigation blocks
- REST API requests are skipped to prevent icon HTML from being saved to post content
